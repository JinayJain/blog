<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:title" content="Programmatic Blogging - Jinay Jain" />
    <meta property="og:description" content="A reflection on how I created the static site generator behind this blog." />

    <meta name="twitter:title" content="Programmatic Blogging - Jinay Jain" />
    <meta name="twitter:description" content="A reflection on how I created the static site generator behind this blog." />
    <meta name="twitter:card" content="summary" />

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="../../styles/post.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/an-old-hope.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <title>Programmatic Blogging</title>
</head>

<body>
    <div class="container">
        <div class="content">
            <div class="header">

                <div class="title-bar">
                    <div class="links">

                        <h3><a href="https://jinay.dev/">home</a></h3>
                        <h3><a href="/">blog</a></h3>
                    </div>
                    <h1 class="title">Programmatic Blogging</h1>
                </div>
                <p class="description">A reflection on how I created the static site generator behind this blog.</p>
                <h3 class="author">Jinay Jain<span class="date"> - May 4, 2020</span></h3>
            </div>
            <p>Blogs are almost never written in pure HTML. Behind every Medium, Wordpress,
or Blogger post lies some system that converts a human-friendly document into
something more computer friendly. Like a program compiler, they translate and
link different files from your blog into a single site, which your
readers will see. To gain a deeper understanding of how exactly these systems
operate, I decided to build my own system. How hard can it be? Before I dive
into the technical explanation of my blog, I’d like to demonstrate some of
the things it can do.</p>
<p>If you would like, you can jump straight to the <a href="#how-it-works" target="_blank">technical explanation</a></p>
<h2>Images</h2>
<p><img src="/images/quokka.jpg" alt="quokka"></p>
<p class="caption">A quokka</p>
<p>Of course, any blog needs a way to handle images or graphics.</p>
<h2>Code</h2>
<p>A core feature of many technical blogs, I wanted to have a clean way of
displaying code snippets in tandem with my blog writing. Each code block is
automatically highlighted according to what language it’s in.</p>
<p><strong>C++</strong></p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello, world&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>Python</strong></p>
<pre class="hljs"><code><span class="hljs-keyword">if</span> foo:
    print(<span class="hljs-string">&quot;Hello, world&quot;</span>)
<span class="hljs-keyword">else</span>:
    print(<span class="hljs-string">&quot;Goodbye, world&quot;</span>)
</code></pre>
<p><strong>HTML</strong></p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello, world<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>I can even reference code inline: <code>int x = 5;</code></p>
<h2>Math</h2>
<p>In some cases, I might need equations to support my explanations. Using LaTeX
syntax, I can embed math into my posts. Once again, they can either be inline
or displayed as a centered block.</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>=</mo><mo>−</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>N</mi></mrow></msubsup><mo>[</mo><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>(</mo><msub><mi>p</mi><mi>i</mi></msub><mo>)</mo><mo>+</mo><mo>(</mo><mn>1</mn><mo>−</mo><msub><mi>y</mi><mi>i</mi></msub><mo>)</mo><mi>log</mi><mo>(</mo><mn>1</mn><mo>−</mo><msub><mi>p</mi><mi>i</mi></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">L = - \frac{1}{N} \sum_{i=1}^{N} [y_i \log (p_i) + (1 - y_i) \log (1 - p_i)] 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.8283360000000002em;"></span><span class="strut bottom" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">L</span><span class="mrel">=</span><span class="mord">−</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.000005000000000143778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span><span class="op-symbol large-op mop">∑</span></span></span><span style="top:-1.2500050000000003em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">−</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p>
<p>Here is an inline equation: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mi>m</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">y = mx+b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathit">b</span></span></span></span></p>
<h1 id="how-it-works">How It Works</h1>
<p>The main idea behind this project is to build a <strong>static site generator</strong>,
something that will compile my blogposts into a single, deployable website.
The term, though, can mean many different things depending on how the system
is implemented, so I had to answer some questions before I started building.</p>
<ol>
<li>How will I write my blogposts?</li>
<li>What tools will I use to compile the blog?</li>
<li>How will I deploy the blog?</li>
</ol>
<p>What I ended up choosing was to use Markdown as my syntax for writing, NodeJS
to build the project, and GitHub pages to deploy (using the <code>gh-pages</code> NPM
package). These initial choices outlined the general series of steps needed to assemble my blog generator.</p>
<h2>Rendering Markdown Files</h2>
<p><a href="https://en.wikipedia.org/wiki/Markdown" target="_blank">Markdown</a> (the syntax language for
GitHub README’s and many texting platforms), has a relatively simple syntax
that enables a writer to define very basic text editing features: headers,
bolding/italics, links, or code. This allows programmers to easily convert Markdown into other formats like LaTeX documents, Beamer presentations, and HTML pages. In fact, the <a href="https://pandoc.org/" target="_blank">pandoc</a> tool includes native support for converting markdown into a plethora of other file formats, allowing the user to control much of the styling and formatting of the document.</p>
<p>If I wanted to, I might have created a simple parser for Markdown myself.
But—of course—there was a neat NPM package that did the work for me,
<a href="https://github.com/markdown-it/markdown-it" target="_blank">markdown-it</a>. In my code, I
simply read the desired Markdown file as a string and the simple
<code>md.render(source)</code> would parse the document and convert it into HTML tags. <code>markdown-it</code> has several extensions that add extra syntax support for more specific needs. I added the <code>markdown-it-katex</code> package to include math equation rendering.</p>
<p>While rendering, a line like</p>
<pre class="hljs"><code>$$ f(x)=\int_{0}^{1} x^2 dx $$
</code></pre>
<p>is converted into</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mn>0</mn></mrow><mrow><mn>1</mn></mrow></msubsup><msup><mi>x</mi><mn>2</mn></msup><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">f(x)=\int_{0}^{1} x^2 dx
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.4251079999999998em;"></span><span class="strut bottom" style="height:2.337358em;vertical-align:-0.91225em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mop"><span class="op-symbol large-op mop" style="margin-right:0.44445em;top:-0.0011249999999999316em;">∫</span><span class="vlist"><span style="top:0.91225em;margin-left:-0.44445em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">0</span></span></span></span><span style="top:-0.9739999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">d</span><span class="mord mathit">x</span></span></span></span></span></p>
<p>which makes life much easier than trying to explain a loss function with convoluted notation like <code>(y_i - p_i)^2</code>.</p>
<p>I plan on adding some other syntax features as my needs evolve, but the ability to extend the core funcitonality of Markdown is why it’s such an appealing language for developers.</p>
<h2>Capturing Post Metadata</h2>
<p>Some information about the posts—the title, creation date, URL,
etc.—shouldn’t be directly shown to the user, so I created a way to handle
that data first before feeding it into <code>markdown-it</code>. Most SSG systems either
include this metadata in separate files or within a special section in their
Markdown called the front matter. I chose to use the latter, which meant my
Markdown files would have a small section above the Markdown storing the
metadata. For example, here’s the front matter for this post:</p>
<pre class="hljs"><code>---
title: How I Built My Blog
author: Jinay Jain
description: A reflection on how I created the static site generator behind this blog.
date: 1588601471
---
</code></pre>
<p>As is a general theme in this post, an NPM package called <code>front-matter</code>
handled the retrieval of this metadata for each file, returning an object
that contains the fields of the metadata as properties. The remaining text
after the front matter is also returned, which I then feed into
<code>md.render()</code>.</p>
<h2>Styling and Formatting Posts</h2>
<p>After <code>markdown-it</code> renders and outputs the HTML content for the post, it is
embedded into the post template written in the HTML templating language
Handlebars. The <code>post.hbs</code> file, which outlines the general format of a post,
includes spaces for the site generator to replace with the post’s title,
content, and other metadata. The file, although very small, enables me to
customize how posts are formatted and include items like a static footer into
each post. Currently, the code looks like this, but I can iterate and develop
on it as my needs change:</p>
<pre class="hljs"><code><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../../styles/post.css&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">link</span>
            <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>
            <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/an-old-hope.min.css&quot;</span>
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">link</span>
            <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>
            <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css&quot;</span>
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title-bar&quot;</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../..&quot;</span>&gt;</span>home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;author&quot;</span>&gt;</span>
                    {{ author }}<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;date&quot;</span>&gt;</span> - {{ dateString }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            {{{ content }}}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>The styling for these posts is done through SCSS, which is compiled with the
posts during the <code>build</code> script. Since the <code>post.hbs</code> file imports the same
CSS for each post, I can change the styling for all posts using a single
<code>post.scss</code> SCSS file.</p>
<h1>Final Thoughts</h1>
<p>Though I might have had a wider range of prebuilt features from an existing
system like Jekyll, the satisfaction of building the features I need for my
blog supersedes the convenience of using such a system. This post defines
only a tentative view of what features my blog contains, and the true state
of the SSG will be an amalgamation of what features I need from such a
system. Once I have developed the static site generator enough, I hope to
distribute it as open source software for others to use. But for now, it
shall remain a practical tool for maintaining my personal blog and nothing
more.</p>
<p>If you would like to download or inspect the code for this blog, you can find the GitHub repository <a href="https://github.com/jinayjain/blog" target="_blank">here</a>.</p>

        </div>
        <div class="newsletter">
            <h3>Want to stay updated?</h3>
            <p> Hear about my latest adventures in AI, software, and programming</p>
            <form action="https://tinyletter.com/jinay" method="post" target="popupwindow"
                onsubmit="window.open('https://tinyletter.com/jinay', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
                <p><input type="text" name="email" id="tlemail" placeholder="example@email.com"/></p><input type="hidden" value="1"
                    name="embed" /><input type="submit" value="Subscribe" />
            </form>
        </div>

    </div>
    <footer class="footer">
        <hr />
        <p>Jinay Jain</p>

        <a href="https://jinay.dev">website</a>
        <a href="mailto:hi@jinay.dev">email</a>
        <a href="https://github.com/JinayJain/">github</a>
    </footer>
</body>

</html>
